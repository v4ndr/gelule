<!DOCTYPE html>
<html>
  <head>
    <title>Gélule | Dashboard</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="/api/dashboard.css">
  </head>
  <body>
    <div class="title-container">
      <h1>&#x1F48A; Gélule - Dashboard</h1>
    </div>
    <div class="row-container">
      <div class="panel">
        <div class="row">
          <h2>Clics depuis mail</h2>
          <img class="icon" src="/api/assets/database.png" alt="session">
        </div>
        <div class="row">
          <p class="counter" data-val="<%= enrollNumber %>"> 0 </p>
        </div>
      </div>
      <div class="panel">
        <div class="row">
          <h2>No anonymat générés</h2>
          <img class="icon" src="/api/assets/database.png" alt="session">
        </div>
        <div class="row">
          <p class="counter" data-val="<%= anonNumber %>"> 0 </p>
        </div>
      </div>
    </div>
    <div class="row-container">
      <div class="panel">
        <div class="row">
          <h2>Tally submit</h2>
          <img class="icon" src="/api/assets/database.png" alt="session">
        </div>
        <div class="row">
          <p class="counter" data-val="<%= tallyTotal %>"> 0 </p>
        </div>
      </div>
      <div class="panel">
        <div class="row">
          <h2>Recherches</h2>
          <img class="icon" src="/api/assets/database.png" alt="session">
        </div>
        <div class="row">
          <p><%= `${numberOfSessions} ok` %></p>
          <p><%= `${voidSessionsNumber} vides` %></p>
        </div>
      </div>
    </div>
    <div class="row-container">
      <div class="panel">
        <div class="row">
          <h2>Mots-clés</h2>
          <img class="icon" src="/api/assets/keyword.png" alt="keyword">
        </div>
        <div class="table-container">
          <table>
            <thead>
              <tr>
                <th>Mot-clé</th>
                <th>Occurences</th>
              </tr>
            </thead>
            <tbody>
              <% for (var i = 0; i < queriesCount.length; i++) { %>
              <tr>
                <td>"<%= queriesCount[i].query %>"</td>
                <td class="counter"
                  data-val="<%= queriesCount[i].count %>">0</td>
              </tr>
              <% } %>
            </tbody>
          </table>
        </div>
      </div>
      <div class="panel">
        <div class="row">
          <h2>Sites visités</h2>
          <img class="icon" src="/api/assets/domain.png" alt="domain">
        </div>
        <div class="table-container">
          <table>
            <thead>
              <tr>
                <th>Domaine</th>
                <th>Occurences</th>
              </tr>
            </thead>
            <tbody>
              <% for (var i = 0; i < domainsCount.length; i++) { %>
              <tr>
                <td><%= domainsCount[i].domain %></td>
                <td class="counter"
                  data-val="<%= domainsCount[i].count %>">0</td>
              </tr>
              <% } %>
            </tbody>
          </table>
        </div>
      </div>
    </div>
    <div class="row-container">
      <div class="panel">
        <div class="row">
          <h2>Satisfaction</h2>
          <img class="icon" src="/api/assets/satisfaction.png"
            alt="satisfaction">
        </div>
        <div class="center">
          <div class="progress-container">
            <svg viewBox="0 0 36 36" class="circular-chart gray">
              <path class="circle-bg"
                d="M18 2.0845
                  a 15.9155 15.9155 0 0 1 0 31.831
                  a 15.9155 15.9155 0 0 1 0 -31.831" />
              <path class="circle"
                stroke-dasharray="<%= satisfactionRate %>, 100"
                d="M18 2.0845
                  a 15.9155 15.9155 0 0 1 0 31.831
                  a 15.9155 15.9155 0 0 1 0 -31.831" />
              <text x="18" y="20.35" class="percentage"><%= satisfactionRate
                %>%</text>
            </svg>
          </div>
        </div>
      </div>
    </div>
    <p
      style="font-size:18px; font-family: 'Noto Sans', sans-serif; text-align: center; margin-top:30px;">vandr.</p>
  </body>
  <script src="/api/dashboard.js"></script>
</html>